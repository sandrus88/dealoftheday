<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">

<ui:composition template="/template/pageLayout.xhtml">
	<ui:define name="content">
    	
		<h:form id="searchForm">
			<p:growl id="message" showDetail="true"/>
			<!--<p:messages id="message" showDetail="true" closable="true">-->
				<!--<p:autoUpdate/>-->
			<!--</p:messages>-->

			<h:outputText value="#{msg['customer.search']}" styleClass="searchTitle"/>

			<h:panelGrid border="0" columns="4" width="50%" >
				<h:panelGrid columns="2">
					<p:outputLabel for="id" value="#{msg['customer.id']}" />
					<p:inputText id="id" value="#{customerController.searchId}" maxlength="7" size="3">
						<f:convertNumber />
						<p:ajax event="blur" update="id"/>
					</p:inputText>

					<p:outputLabel value="" />
					<p:outputLabel value="" />
				</h:panelGrid>

				<h:panelGrid columns="2">
					<p:outputLabel for="name" value="#{msg['customer.name']}" />
					<p:inputText id="name" value="#{customerController.searchName}" maxlength="20" />
					<p:outputLabel for="surname" value="#{msg['customer.surname']}" />
					<p:inputText id="surname" value="#{customerController.searchSurname}" maxlength="20" />
				</h:panelGrid>

				<h:panelGrid columns="2">
					<p:outputLabel for="email" value="#{msg['customer.email']}" />
					<p:inputText id="email" value="#{customerController.searchEmail}" maxlength="20">
						<f:validator validatorId="emailValidator" />
					</p:inputText>
					<p:outputLabel for="tel" value="#{msg['customer.tel']}" />
					<p:inputText id="tel" value="#{customerController.searchTel}" />
				</h:panelGrid>

				<h:panelGrid columns="2" styleClass="right">
					<p:outputLabel for="sex" value="#{msg['customer.sex']}" />
					<p:selectOneMenu id="sex" value="#{customerController.searchSex}" styleClass="dropDownYNWidth">
						<f:selectItem itemLabel=""/>
						<f:selectItem itemLabel="M" itemValue="#{customerController.getGenderMale()}"/>
						<f:selectItem itemLabel="F" itemValue="#{customerController.getGenderFemale()}"/>
					</p:selectOneMenu>

					<p:outputLabel for="active" value="#{msg['customer.active']}" />
					<p:selectOneMenu id="active" value="#{customerController.searchActive}" styleClass="dropDownYNWidth">
						<f:selectItem itemLabel="" />
						<f:selectItem itemLabel="#{msg['customer.label.yes']}" itemValue="#{true}"/>
						<f:selectItem itemLabel="#{msg['customer.label.no']}" itemValue="#{false}"/>
					</p:selectOneMenu>
				</h:panelGrid>
			</h:panelGrid>

			<h:panelGrid border="0" columns="4" width="50%" >
				<h:panelGrid border="0" columns="2" styleClass="right">
					<p:commandButton value="#{msg['search']}" actionListener="#{customerController.searchCustomer()}" update="searchResultForm message" styleClass="button" icon="ui-icon ui-icon-search"/>
					<p:commandButton value="#{msg['clear']}" actionListener="#{customerController.cleanSearchForm()}" update="searchForm" styleClass="button" icon="ui-icon ui-icon-arrowrefresh-1-w">
						<p:ajax update="searchForm" resetValues="true"/>
					</p:commandButton>
				</h:panelGrid>
			</h:panelGrid>
		</h:form>
	
		<h:form id="searchResultForm">
			<h:panelGrid border="0" columns="2" >
				<h:outputText value="#{msg['customer.home.table']}" styleClass="searchTitle"/>

				<p:commandLink oncomplete="PF('dialogNewCustomer').show()" id="linkAddCustomer" >
					<i class="fa fa-fw fa-plus addIcon"/>
					<p:tooltip for="linkAddCustomer" value="#{msg['add']}" position="bottom"/>
				</p:commandLink>
			</h:panelGrid>

			<p:dataTable value="#{customerController.customerList}" var="item" id="customersTable" emptyMessage="#{msg['customer.empty.table']}"
						 paginator="true" rows="50" rowsPerPageTemplate="10,50,100"
						 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} Nr. Rows: #{customerController.customerList.size()}">
				<p:column width="5%" headerText="#{msg['customer.id']}" sortBy="#{item.id}">
					<h:outputText value="#{item.id}" />
				</p:column>

				<p:column width="15%" headerText="#{msg['customer.name']}" sortBy="#{item.name}">
					<h:outputText value="#{item.name}" />
				</p:column>

				<p:column width="15%" headerText="#{msg['customer.surname']}" sortBy="#{item.surname}">
					<h:outputText value="#{item.surname}" />
				</p:column>

				<p:column width="15%" headerText="#{msg['customer.birthdate']}">
					<h:outputText value="#{item.birthDate}">
						<f:convertDateTime pattern="dd/MM/yyyy" timeZone="CET"/>
					</h:outputText>
				</p:column>

				<p:column width="20%" headerText="#{msg['customer.email']}">
					<h:outputText value="#{item.email}" />
				</p:column>

				<p:column width="15%" headerText="#{msg['customer.tel']}">
					<h:outputText value="#{item.tel}" />
				</p:column>

				<p:column width="5%" headerText="#{msg['customer.sex']}" sortBy="#{item.sex}">
					<h:outputText value="#{item.sex}" />
				</p:column>

				<p:column width="6%" headerText="#{msg['customer.active']}" sortBy="#{item.active}">
					<p:selectBooleanCheckbox value="#{item.active}" disabled="true"/>
				</p:column>

				<p:column width="4%">
					<p:commandLink oncomplete="PF('dialogEditCustomer').show()" update="customerEditForm" id="linkEdit">
						<i class="fa fa-fw fa-pencil"/>
						<p:tooltip for="linkEdit" value="#{msg['action.edit']}" position="bottom"/>
						<f:setPropertyActionListener value="#{item}" target="#{customerController.selectedCustomer}" />
					</p:commandLink>
					<p:commandLink oncomplete="PF('dialog').show()" id="linkRemove">
						<i class="fa fa-fw fa-remove"/>
						<p:tooltip for="linkRemove" value="#{msg['action.delete']}" position="bottom"/>
						<f:setPropertyActionListener value="#{item}" target="#{customerController.selectedCustomer}" />
					</p:commandLink>
				</p:column>
			</p:dataTable>

			<p:dialog widgetVar="dialog" showEffect="fade" hideEffect="fade" modal="true" width="350" resizable="false" header="#{msg['popup.confirm']}" position="center" draggable="false">
				<h:outputText value="#{msg['popup.message.delete']}"/><br/><br/>
				<h:panelGrid columns="2" border="0" style="margin: 0 auto;">
					<p:commandButton value="#{msg['popup.delete.yes']}" actionListener="#{customerController.deleteCustomer(customerController.selectedCustomer)}" update="searchResultForm" oncomplete="PF('dialog').hide()" styleClass="button"/>
					<p:commandButton value="#{msg['popup.delete.no']}" styleClass="button" onclick="PF('dialog').hide()"/>
				</h:panelGrid>
			</p:dialog>
		</h:form>
		
		<!-- <h:form>
		<p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">	
       		<p:ajaxStatus onstart="PF('statusDialog').show()" oncomplete="PF('statusDialog').hide()"/>
       		<i class="fa fa-spinner fa-spin" style="font-size: 2rem"/>
    	</p:dialog>
		</h:form> -->
		
		<ui:include src="editCustomerDialog.xhtml" />
		<ui:include src="newCustomerDialog.xhtml" />
	</ui:define>
</ui:composition>
</html>