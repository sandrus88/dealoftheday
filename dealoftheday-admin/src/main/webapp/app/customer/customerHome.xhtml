<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">

<ui:composition template="/template/pageLayout.xhtml">
	<ui:define name="content">

		<h:form id="searchForm">
			<h1>
				<h:outputText value="#{msg['customer.search']}" />
			</h1>

			<p:growl id="message" showDetail="true"/>
				<p:outputPanel id="panel">
					<h:panelGrid border="0" columns="4" width="100%">
						<h:panelGrid columns="2">
							<p:outputLabel for="id" value="#{msg['customer.id']}" />
							<p:inputText id="id" value="#{customerController.searchId}" maxlength="7" size="3">
								<f:convertNumber />
								<p:ajax event="blur" update="id"/>
							</p:inputText>
						</h:panelGrid>
				
						<h:panelGrid columns="2" style="margin: 0 auto;">
							<p:outputLabel for="name" value="#{msg['customer.name']}" />
							<p:inputText id="name" value="#{customerController.searchName}" maxlength="20" />
							<p:outputLabel for="surname" value="#{msg['customer.surname']}" />
							<p:inputText id="surname" value="#{customerController.searchSurname}" maxlength="20" />
						</h:panelGrid>
				
						<h:panelGrid columns="2" style="margin: 0 auto;">
							<p:outputLabel for="email" value="#{msg['customer.email']}" />
							<p:inputText id="email" value="#{customerController.searchEmail}" maxlength="20">
								<f:validator validatorId="emailValidator" />
							</p:inputText>
							<p:outputLabel for="tel" value="#{msg['customer.tel']}" />
							<p:inputText id="tel" value="#{customerController.searchTel}" />
						</h:panelGrid>
						
						<h:panelGrid columns="2" style="margin: 0 auto;">
							<p:outputLabel for="sex" value="#{msg['customer.sex']}" />
							<p:selectOneMenu id="sex" value="#{customerController.searchSex}">
								<f:selectItem itemLabel=""/>
								<f:selectItem itemLabel="M" itemValue="#{customerController.getGenderMale()}"/>
								<f:selectItem itemLabel="F" itemValue="#{customerController.getGenderFemale()}"/>
							</p:selectOneMenu>
							<p:outputLabel for="enabled" value="#{msg['customer.enabled']}" />
							<p:selectOneMenu id="enabled" value="#{customerController.searchEnabled}">
								<f:selectItem itemLabel="" />
								<f:selectItem itemLabel="#{msg['customer.label.yes']}" itemValue="#{true}"/>
								<f:selectItem itemLabel="#{msg['customer.label.no']}" itemValue="#{false}"/>
							</p:selectOneMenu>
						</h:panelGrid>
					</h:panelGrid>
				</p:outputPanel>

				<h:panelGrid border="0" columns="2" style="margin-left: 950px;">
					<p:commandButton value="#{msg['search']}" actionListener="#{customerController.searchCustomer()}" update="searchResultForm message" styleClass="button"/>
					<p:commandButton value="#{msg['clear']}" actionListener="#{customerController.cleanSearchForm()}" update="searchForm" styleClass="button">
						<p:ajax update="panel" resetValues="true"/>
					</p:commandButton>	
				</h:panelGrid>
			</h:form>

			<h:form id="searchResultForm">
		
				<h1 style="display:inline-block;">
					<h:outputText value="#{msg['customer.home.table']}" style="margin-right: 967px;"/>
				</h1>	
				<p:commandLink oncomplete="PF('dialogNewCustomer').show()" id="linkAddCustomer" style="display:inline-block;">
					<i class="fa fa-fw fa-plus" style="font-size: 2rem; color: #4f4f4f;"/>
					<p:tooltip for="linkAddCustomer" value="#{msg['add']}" position="bottom"/>
				</p:commandLink>
	

				<p:dataTable value="#{customerController.customerList}" var="item" id="customersTable" emptyMessage="#{msg['customer.empty.table']}">

					<p:column width="1">
						<f:facet name="header">
							<h:outputText value="#{msg['customer.id']}" />
						</f:facet>
						<h:outputText value="#{item.id}" />
					</p:column>

					<p:column width="50">
						<f:facet name="header">
							<h:outputText value="#{msg['customer.name']}" />
						</f:facet>
						<h:outputText value="#{item.name}" />
					</p:column>

					<p:column width="50">
						<f:facet name="header">
							<h:outputText value="#{msg['customer.surname']}" />
						</f:facet>
						<h:outputText value="#{item.surname}" />
					</p:column>
				
					<p:column width="20">
						<f:facet name="header">
							<h:outputText value="#{msg['customer.birthdate']}" />
						</f:facet>
						<h:outputText value="#{item.birthDate}">
							<f:convertDateTime pattern="dd/MM/yyyy" timeZone="CET"/>
						</h:outputText>
					</p:column>
				
					<p:column width="100">
						<f:facet name="header">
							<h:outputText value="#{msg['customer.email']}" />
						</f:facet>
						<h:outputText value="#{item.email}" />
					</p:column>

					<p:column width="30">
						<f:facet name="header">
							<h:outputText value="#{msg['customer.tel']}" />
						</f:facet>
						<h:outputText value="#{item.tel}" />
					</p:column>
					
					<p:column width="5">
						<f:facet name="header">
							<h:outputText value="#{msg['customer.sex']}" />
						</f:facet>
						<h:outputText value="#{item.sex}" />
					</p:column>
					
					<p:column width="10">
						<f:facet name="header">
							<h:outputText value="#{msg['customer.enabled']}" />
						</f:facet>
						<h:outputText value="#{item.enabled}" converter="booleanToYesNoConverter" />
					</p:column>
				
					<p:column width="20">
						<f:facet name="header">
							<h:outputText value="#{msg['action.title']}" />
						</f:facet>
						<p:commandLink oncomplete="PF('dialogViewCustomer').show()" update="detailCustomerForm" id="linkSearch">
							<i class="fa fa-fw fa-search"/>
							<p:tooltip for="linkSearch" value="#{msg['action.view']}" position="bottom"/>
							<f:setPropertyActionListener value="#{item}" target="#{customerController.selectedCustomer}"/>
						</p:commandLink> |
						<p:commandLink oncomplete="PF('dialogEditCustomer').show()" update="customerEditForm" id="linkEdit">
							<i class="fa fa-fw fa-pencil"/>
							<p:tooltip for="linkEdit" value="#{msg['action.edit']}" position="bottom"/>
							<f:setPropertyActionListener value="#{item}" target="#{customerController.selectedCustomer}" />
						</p:commandLink> |
						<p:commandLink oncomplete="PF('dialog').show()" id="linkRemove">
							<i class="fa fa-fw fa-remove"/>
							<p:tooltip for="linkRemove" value="#{msg['action.delete']}" position="bottom"/>
							<f:setPropertyActionListener value="#{item}" target="#{customerController.selectedCustomer}" />
						</p:commandLink>
					</p:column>
				</p:dataTable>
			
				<p:dialog widgetVar="dialog" showEffect="fade" hideEffect="fade" modal="true" width="350" resizable="false" header="#{msg['popup.confirm']}" position="center" draggable="false">
					<h:outputText value="#{msg['popup.message.delete']}"/><br/><br/>
					<h:panelGrid columns="2" border="0" style="margin: 0 auto;">
						<p:commandButton value="#{msg['popup.delete.yes']}" actionListener="#{customerController.deleteCustomer(customerController.selectedCustomer)}" update="searchResultForm" oncomplete="PF('dialog').hide()" styleClass="button"/>
            			<p:commandButton value="#{msg['popup.delete.no']}" styleClass="button" onclick="PF('dialog').hide()"/>
					</h:panelGrid>
				</p:dialog>
			</h:form>
		
			<ui:include src="editCustomerDialog.xhtml" />
			<ui:include src="viewCustomerDialog.xhtml" />
			<ui:include src="newCustomerDialog.xhtml" />
		</ui:define>
	</ui:composition>
</html>